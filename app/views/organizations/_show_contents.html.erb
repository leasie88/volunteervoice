<%= javascript_include_tag "/assets/JQtextile.js"%>

<script type="text/javascript">
$(document).ready(function() {
  /* Activating Best In Place */
  $(".best_in_place").best_in_place();
});

$('.best_in_place').bind('ajax:success', function(){ 
    if ($(this).attr('data-type') == 'textarea') {
        $(this).JQtextile('textile', this.innerHTML);
	};
});
</script>


<% programSubjects = []%>
<% groupSizes = []%>
<% programLengths = []%>

<% organization.program_subjects.each do |f|%>
<% programSubjects << f.subject unless programSubjects.include?(f.subject)%>
<% end %>

<% organization.program_sizes.each do |f|%>
<% groupSizes << f.size unless groupSizes.include?(f.size)%>
<% end %>

<% organization.program_cost_length_maps.sort_by(&:length).each do |f|%>
<% programLengths << [f.length_number, f.length_name].join(" ") unless programLengths.include?([f.length_number, f.length_name].join(" ")) %>
<% end %>


<div class="container" style="margin-left:-15px; border:1px solid #575758; background-color:#E9ECE9; padding:bottom:25px; color:#575758; min-width:760px; margin-top:50px">
	<div class="row">
		<div class="two columns" style="margin:0;padding:0; width:18%; margin-top:20px; padding-left:20px">
			<%= image_tag organization.square_image.url, :style =>"height:130px;width:130px" %>
		</div>
		
		<div class="six columns" style="width:53%; text-align:left; margin:0; padding:0; margin-top:-25px; padding-left:10px;">
			<br />
			<p style="font-size:3.5em; color:#62acbd; line-height:1.3em;"> <%= organization.name %></p>
				<% if @can_edit %>
				&#9998;
	<font style="color:#68c2d8"><u><%=best_in_place_if @can_edit, organization, :url, :type => :input, :nil => "Click to edit"%></u></font>
				<% else %>
				<a style="font-size:1.2em;" class="organization_url" href="<%=organization.url%>" target="_blank"> <u><%= organization.url%></u></a>
				<% end %>

		</div>
		<div class="three columns"  style="text-align:center; margin-top:-95px; padding:0; width:23%">

			<br />
			<br />
			<p style="margin-top:-25px"><%= render :partial => "bigStar", :locals => {:star => organization.roundup(overall)}%></p>
			<br />

			<p style="font-family:ArchitectsDaughterRegular; font-size:1.1em; color:#e67b5a; line-height:1.3em">Based on <%= pluralize reviews_count, "reviews"%></p> 
			<br />
			<% if !(current_user.nil?) && current_user.admin? %>
			<%= link_to "edit", "/programs/#{organization.id}/edit"%>
			<% end %>
		</div>
	</div>



<div class="row" style="margin-top:50px">
	<div class="nine columns">
		<div class="two columns" style="font-size:1.5em; width:20%; padding-left:10px">
				 <% if @can_edit %>
				&#9998;&nbsp;&nbsp;
				<% end %>
				<u><b>Mission:</b></u>
		</div>
		<div class="ten columns" style="border:1px solid #575758; height:130px; width:75%; overflow:auto; margin:0;padding:10px">
			<%= best_in_place_if @can_edit, organization, :misson, :type => :textarea, :display_as => :textilize_misson, :nil => "Click to Edit", :sanitize => false%> 
		</div>

		<div class = "two columns" style="font-size:1.5em; margin:0;padding:0; margin-top:25px; padding-left:10px; width:20%">

			<u><font style="line-height:1.2em">Program Subjects:</font></u>
		</div>
		<div class="ten columns" style="border: 1px solid #575758; height:130px; overflow:auto; width:75%; margin:0;padding:10px; margin-top:25px; float:left">
<%= programSubjects[0..(programSubjects.count - 2)].join(", ")%>
		</div>
	</div>
	<div class="three columns" style="float:left;margin-left:10px; padding:10px; height:295px; background-color:#c1dfdb; height:310.5px; overflow:auto;">
		<p style="font-weight:600; font-size:1.1em"> 
			<% if @can_edit%>
			&#9998; 
			<% end %>
			headquarters address: </p><%= best_in_place_if @can_edit, organization, :headquarters_location, :type => :textarea, :display_as => :textilize_headquarters_address, :nil => "Click to edit"%>
		<br />
		<br />
		
		<p style="font-weight:600; font-size:1.1em">
	    <% if @can_edit%>
		&#9998; 
		<% end %>
	    phone:</p> <%=best_in_place_if @can_edit, organization, :phone, :type => :input, :nil => "Click to edit"%>
		<br />
		<br />
		<br />
		
		<p style="font-weight:600; font-size:1.1em"> 
			<% if @can_edit%>
			&#9998; 
			<% end %>
			email: </p><%=best_in_place_if @can_edit, organization, :email, :type => :input, :nil => "Click to edit"%>
		<br />
		<br />
		<br />
		<br />
		
	</div>
</div>
<div class="row">
	<div class="twelve columns" style="font-size:1.5em; margin-top:25px; width:20%; padding-left:10px">

		<u><b>Details:</b></u>
	</div>
	<div class="eleven columns">
		<div class="six columns" style="font-size:1.1em;">
			<br />
			<p style="font-weight:600"> 
				<% if @can_edit%>
				&#9998; 
				<% end %>
				Operating since:</p><%=best_in_place_if @can_edit, organization, :operating_since, :type => :input, :nil => "Click to edit"%><br /><br />
			
			<p style="font-weight:600"> 
				<% if @can_edit%>
				&#9998; 
				<% end %>
				Run by:</p><%=best_in_place_if @can_edit, organization, :run_by, :type => :input, :nil => "Click to edit"%><br />
			<p style="font-weight:600">Full Time Staff: </p><%=best_in_place_if @can_edit, organization, :full_time_staff, :type => :input, :nil => "Click to edit"%><br /><br />
			<p style="font-weight:600"> 
				<% if @can_edit%>
				&#9998; 
				<% end %>
				# Volunteers each year: </p><%=best_in_place_if @can_edit, organization, :num_vols_yr, :type => :input, :nil => "Click to edit"%><br /><br />
			<p style="font-weight:600"> 
				<% if @can_edit%>
				&#9998; 
				<% end %>
				# Volunteers to date: </p><%=best_in_place_if @can_edit, organization, :num_vols_date, :type => :input, :nil => "Click to edit"%><br /><br />
			<p style="font-weight:600"> # Active Programs: </p><%= organization.programs.count%><br /><br />
			<p style="font-weight:600"> 
			<% if @can_edit%>
			&#9998; 
			<% end %>
			Application Process: </p><%= best_in_place_if @can_edit, organization, :application_process, :type => :textarea, :display_as => :textilize_application_process, :nil => "Click to edit"%><br />
			<p style="font-weight:600">Business Model: </p><%= organization.business_model.html_safe%><br /><br />
			
			<p style="font-weight:600">ID number: </p><%=organization.id_number%><br /><br />
			
			<p style="font-weight:600">Volunteer Program Model: </p><%=organization.program_model_string%><br /><br />
			
			<p style="font-weight:600">Types of Programs: </p>
			<%= organization.types_of_programs%>
			<br /><br />
			
		</div>
		<div class="six columns" style="width:45%; border-left:1px solid #e67b5a; font-size:1.1em; padding-left:2%">
			<br />
			<p><font style="font-weight:600">Price Ranges:</font> <a href="#price-ranges-box" class="price-ranges-window">Click here to view</a> </p><br />
			
			<p style="font-weight:600"> 
			<% if @can_edit%>
			&#9998; 
			<% end %>
			Price Includes: </p><%= best_in_place_if @can_edit, organization, :program_costs_includes, :type => :textarea, :display_as => :textilize_program_costs_includes, :nil => "Click to edit"%><br />
			<p style="font-weight:600"> 
			<% if @can_edit%>
			&#9998; 
			<% end %>
			Price Doesn't Include: </p><%= best_in_place_if @can_edit, organization, :program_costs_doesnt_include, :type => :textarea, :display_as => :textilize_program_costs_doesnt_include, :nil => "Click to edit"%><br />
			<p><font style="font-weight:600">Additional Fees: </font><%= organization.additional_fees%></p><br />
			<p><font style="font-weight:600">Price Breakdown: </font><%= organization.price_breakdown %></p><br />
			<p style="font-weight:600">Group Sizes: </p><%= groupSizes[0..(groupSizes.count - 2)].join(", ")%><br /><br />
			
			
			
			<p style="font-weight:600">Program Lengths: </p><%= programLengths.first%> - <%= programLengths.last %> <br /><br />
			<p style="font-weight:600"> 
			<% if @can_edit%>
			&#9998; 
			<% end %>
			Preparation/Orientation: </p><%= best_in_place_if @can_edit, organization, :training_resources, :type => :textarea, :display_as => :textilize_training_resources, :nil => "Click to edit"%><br />
			<p style="font-weight:600">Good to know: </p><%=organization.good_to_know.html_safe%><br />
		</div>
	</div>


	<div class="twelve columns">

<br />
<br />
		<p style="text-align:center; margin-left:35px">	<%= link_to (image_tag "https://s3-us-west-1.amazonaws.com/volunteervoice/images/reviewThisOrg2.png"), {:controller => "reviews", :action => "new", :organization_id => organization.id}, :onmousedown => "this.className = 'shadowed'", :onmouseup => "this.className = 'nothing'", :style =>"height:20px"%></p>


	<p style="text-align:right; margin-top:-85px; padding-bottom:20px"><%= link_to (image_tag "https://s3-us-west-1.amazonaws.com/volunteervoice/images/vviInfo.png"), "#info-box", :onmousedown => "this.className = 'shadowed'", :onmouseup => "this.className = 'info-window'", :class => "info-window"%> </p>

</div>
</div>
</div>
<style>
a.organization_url:active{color:#68c2d8}
a.organization_url:visited{color:#68c2d8}
a.organization_url:link{color:#68c2d8}
a.organization_url:hover{color:white; background:none}
</style>








